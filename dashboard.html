<!DOCTYPE html>
<html lang="en">
<head>
  <meta charset="UTF-8" />
  <meta name="viewport" content="width=device-width, initial-scale=1.0" />
  <title>üè† Real Estate House Price Prediction Dashboard</title>

  <!-- Bootstrap -->
  <link href="https://cdn.jsdelivr.net/npm/bootstrap@5.3.0/dist/css/bootstrap.min.css" rel="stylesheet">
  <!-- Chart.js -->
  <script src="https://cdn.jsdelivr.net/npm/chart.js"></script>
  <!-- PapaParse -->
  <script src="https://cdnjs.cloudflare.com/ajax/libs/PapaParse/5.3.2/papaparse.min.js"></script>

  <style>
    body {
      background-color: #f8f9fa;
      font-family: "Segoe UI", sans-serif;
    }
    .dashboard-title {
      text-align: center;
      font-size: 2rem;
      font-weight: bold;
      color: #2c3e50;
      margin-top: 20px;
    }
    .card {
      border-radius: 12px;
      box-shadow: 0 3px 10px rgba(0,0,0,0.1);
    }
    #dataPreview {
      max-height: 300px;
      overflow-y: auto;
    }
  </style>
</head>
<body>
  <div class="container py-4">
    <div class="dashboard-title">üè† Real Estate House Price Prediction Dashboard</div>
    <hr>

    <!-- 1. Data Upload & Overview -->
    <div class="card mb-4">
      <div class="card-body">
        <h5 class="fw-semibold mb-3">üìÇ Data Upload & Overview</h5>
        <input type="file" id="fileInput" accept=".csv" class="form-control mb-3" />
        <div id="dataPreview" class="table-responsive"></div>
        <div id="statsTable" class="mt-3"></div>
        <canvas id="missingChart" height="120"></canvas>
      </div>
    </div>

    <!-- 2. Feature Inputs -->
    <div class="card mb-4">
      <div class="card-body">
        <h5 class="fw-semibold mb-3">‚öôÔ∏è Feature Inputs for Prediction</h5>
        <form id="featureForm" class="row g-3"></form>
        <div class="text-center mt-3">
          <button class="btn btn-primary px-4" id="predictBtn">Predict Price</button>
        </div>
      </div>
    </div>

    <!-- 3. Prediction Output -->
    <div class="card mb-4 text-center">
      <div class="card-body">
        <h5 class="fw-semibold mb-3">üí∞ Predicted House Price</h5>
        <h3 id="predictedPrice" class="text-success">--</h3>
      </div>
    </div>

    <!-- 4. Data Visualization -->
    <div class="card mb-4">
      <div class="card-body">
        <h5 class="fw-semibold mb-3">üìä Data Visualization</h5>
        <canvas id="priceChart" height="130"></canvas>
      </div>
    </div>

    <!-- 5. Insights Summary -->
    <div class="card mb-4">
      <div class="card-body">
        <h5 class="fw-semibold mb-3">üìà Insights Summary</h5>
        <ul id="insightsList">
          <li>Upload data to view insights.</li>
        </ul>
      </div>
    </div>
  </div>

  <script>
    let dataset = [];
    let missingChart, priceChart;

    // Handle CSV Upload
    document.getElementById("fileInput").addEventListener("change", function(e) {
      const file = e.target.files[0];
      if (!file) return;

      Papa.parse(file, {
        header: true,
        skipEmptyLines: true,
        complete: function(results) {
          dataset = results.data;
          displayDataPreview(dataset);
          displayBasicStats(dataset);
          visualizeMissingValues(dataset);
          createFeatureInputs(dataset);
          drawPriceChart(dataset);
          showInsights(dataset);
        }
      });
    });

    // Preview first 10 rows
    function displayDataPreview(data) {
      const cols = Object.keys(data[0]);
      let html = `<table class='table table-striped table-bordered'><thead><tr>`;
      cols.forEach(c => html += `<th>${c}</th>`);
      html += `</tr></thead><tbody>`;
      data.slice(0, 10).forEach(row => {
        html += "<tr>";
        cols.forEach(c => html += `<td>${row[c]}</td>`);
        html += "</tr>";
      });
      html += "</tbody></table>";
      document.getElementById("dataPreview").innerHTML = html;
    }

    // Basic Statistics
    function displayBasicStats(data) {
      const numericCols = Object.keys(data[0]).filter(c => data.some(r => !isNaN(parseFloat(r[c]))));
      const stats = numericCols.map(col => {
        const vals = data.map(r => parseFloat(r[col])).filter(v => !isNaN(v));
        if (vals.length === 0) return null;
        const mean = (vals.reduce((a,b)=>a+b,0)/vals.length).toFixed(2);
        const sorted = [...vals].sort((a,b)=>a-b);
        const median = sorted[Math.floor(sorted.length/2)].toFixed(2);
        const min = Math.min(...vals).toFixed(2);
        const max = Math.max(...vals).toFixed(2);
        const std = Math.sqrt(vals.map(x => (x - mean)**2).reduce((a,b)=>a+b,0)/vals.length).toFixed(2);
        return { col, mean, median, min, max, std };
      }).filter(Boolean);

      let html = `<table class="table table-bordered"><thead>
        <tr><th>Feature</th><th>Mean</th><th>Median</th><th>Min</th><th>Max</th><th>Std Dev</th></tr>
        </thead><tbody>`;
      stats.forEach(s => {
        html += `<tr>
          <td>${s.col}</td>
          <td>${s.mean}</td>
          <td>${s.median}</td>
          <td>${s.min}</td>
          <td>${s.max}</td>
          <td>${s.std}</td>
        </tr>`;
      });
      html += "</tbody></table>";
      document.getElementById("statsTable").innerHTML = html;
    }

    // Missing Value Visualization
    function visualizeMissingValues(data) {
      const cols = Object.keys(data[0]);
      const missingCounts = cols.map(c => data.filter(r => !r[c] || r[c].trim() === "").length);

      if (missingChart) missingChart.destroy();
      missingChart = new Chart(document.getElementById("missingChart"), {
        type: 'bar',
        data: {
          labels: cols,
          datasets: [{
            label: 'Missing Values',
            data: missingCounts,
            backgroundColor: '#3498db'
          }]
        },
        options: {
          plugins: { legend: { display: false } },
          scales: {
            x: { title: { display: true, text: 'Columns' }},
            y: { title: { display: true, text: 'Count' }}
          }
        }
      });
    }

    // Create dynamic input fields from dataset columns
    function createFeatureInputs(data) {
      const form = document.getElementById("featureForm");
      form.innerHTML = "";
      const cols = Object.keys(data[0]);

      cols.forEach(col => {
        // Skip target column (Price)
        if (col.toLowerCase().includes("price")) return;

        const sampleValue = data[0][col];
        let field = "";

        // Numeric input
        if (!isNaN(parseFloat(sampleValue))) {
          field = `
            <div class="col-md-4">
              <label class="form-label">${col}</label>
              <input type="number" id="${col}" class="form-control" placeholder="Enter ${col}" />
            </div>`;
        }
        // Dropdown for categorical data
        else {
          const uniqueVals = [...new Set(data.map(r => r[col]).filter(Boolean))];
          field = `
            <div class="col-md-4">
              <label class="form-label">${col}</label>
              <select id="${col}" class="form-select">
                ${uniqueVals.map(v => `<option value="${v}">${v}</option>`).join("")}
              </select>
            </div>`;
        }
        form.insertAdjacentHTML("beforeend", field);
      });
    }

    // Visualization: Area vs Price
    function drawPriceChart(data) {
      const areaCol = Object.keys(data[0]).find(c => c.toLowerCase().includes("area"));
      const priceCol = Object.keys(data[0]).find(c => c.toLowerCase().includes("price"));
      if (!areaCol || !priceCol) return;

      const points = data.map(r => ({
        x: parseFloat(r[areaCol]),
        y: parseFloat(r[priceCol])
      })).filter(p => !isNaN(p.x) && !isNaN(p.y));

      if (priceChart) priceChart.destroy();
      priceChart = new Chart(document.getElementById("priceChart"), {
        type: 'scatter',
        data: {
          datasets: [{
            label: 'Area vs Price',
            data: points,
            pointRadius: 4,
            backgroundColor: '#2ecc71'
          }]
        },
        options: {
          scales: {
            x: { title: { display: true, text: areaCol } },
            y: { title: { display: true, text: priceCol } }
          }
        }
      });
    }

    // Insights Summary
    function showInsights(data) {
      const priceCol = Object.keys(data[0]).find(c => c.toLowerCase().includes("price"));
      if (!priceCol) return;

      const prices = data.map(r => parseFloat(r[priceCol])).filter(p => !isNaN(p));
      const mean = (prices.reduce((a,b)=>a+b,0)/prices.length).toFixed(2);
      const max = Math.max(...prices).toFixed(2);
      const min = Math.min(...prices).toFixed(2);
      const insights = `
        <li>Average Price: ‚Çπ${mean}</li>
        <li>Highest Price: ‚Çπ${max}</li>
        <li>Lowest Price: ‚Çπ${min}</li>
        <li>Total Records: ${data.length}</li>`;
      document.getElementById("insightsList").innerHTML = insights;
    }

    // Dummy Prediction
    document.getElementById("predictBtn").addEventListener("click", function(e) {
      e.preventDefault();
      const inputs = document.querySelectorAll("#featureForm input, #featureForm select");
      let total = 0;
      inputs.forEach(inp => {
        const val = parseFloat(inp.value) || 1;
        total += val * 1000;
      });
      document.getElementById("predictedPrice").textContent = "‚Çπ" + (total * 0.85).toLocaleString();
    });
  </script>
</body>
</html>  this code is correct but the data visualization alone not coming  